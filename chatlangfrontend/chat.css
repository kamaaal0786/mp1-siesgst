/* --- THEME VARIABLES --- */
:root {
    /* Shared */
    --primary-blue: #0077ff;
    --gradient-blue: linear-gradient(135deg, #00c6ff, #0077ff);

    /* Light Theme */
    --bg-main-light: #f7f9fc;
    --bg-sidebar-light: linear-gradient(160deg, #0077ff, #00c6ff);
    --bg-content-light: #fff;
    --bg-received-msg-light: #e_a_e_c_f_0;
    --text-primary-light: #2c3e50;
    --text-sidebar-light: #fff;
    --border-light: #e_a_e_c_f_0;
    --shadow-light: rgba(0,0,0,0.05);

    /* Dark Theme */
    --bg-main-dark: #282b30;
    --bg-sidebar-dark: #1e2124;
    --bg-content-dark: #36393f;
    --bg-received-msg-dark: #40444b;
    --text-primary-dark: #f1f1f1;
    --text-sidebar-dark: #f1f1f1;
    --border-dark: #40444b;
    --shadow-dark: rgba(0,0,0,0.2);
}

/* --- General Styling --- */
body {
    font-family: 'Segoe UI', sans-serif;
    margin: 0;
    background: var(--bg-main, var(--bg-main-light));
    color: var(--text-primary, var(--text-primary-light));
    overflow: hidden;
    transition: background-color 0.3s, color 0.3s;
}

body.dark-mode {
    --bg-main: var(--bg-main-dark);
    --bg-sidebar: var(--bg-sidebar-dark);
    --bg-content: var(--bg-content-dark);
    --bg-received-msg: var(--bg-received-msg-dark);
    --text-primary: var(--text-primary-dark);
    --text-sidebar: var(--text-sidebar-dark);
    --border: var(--border-dark);
    --shadow: var(--shadow-dark);
}


/* --- THEME TOGGLE SWITCH --- */
.theme-switcher {
    display: flex;
    align-items: center;
}
#theme-toggle {
    display: none;
}
#theme-toggle + label {
    width: 50px;
    height: 26px;
    background: #ccc;
    border-radius: 15px;
    position: relative;
    cursor: pointer;
    transition: background-color 0.3s;
}
#theme-toggle + label span {
    width: 22px;
    height: 22px;
    background: white;
    border-radius: 50%;
    position: absolute;
    top: 2px;
    left: 2px;
    transition: transform 0.3s;
}
#theme-toggle:checked + label {
    background: var(--primary-blue);
}
#theme-toggle:checked + label span {
    transform: translateX(24px);
}


/* --- Main Chat Layout --- */
.chat-container {
    display: flex;
    height: 100vh;
}

/* --- Sidebar --- */
.sidebar {
    width: 300px;
    background: var(--bg-sidebar, var(--bg-sidebar-light));
    color: var(--text-sidebar, var(--text-sidebar-light));
    display: flex;
    flex-direction: column;
    transition: all 0.3s ease;
}
.sidebar-header {
    padding: 20px 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(0,0,0,0.1);
}
.sidebar-header h3 { margin: 0; }

#logout-btn {
    background: rgba(255,255,255,0.2);
    border: 1px solid rgba(255,255,255,0.5);
    color: var(--text-sidebar, var(--text-sidebar-light));
    border-radius: 20px;
    padding: 6px 12px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
}
#logout-btn:hover { background: rgba(255,255,255,0.3); }

.user-list { list-style: none; padding: 10px 0; margin: 0; overflow-y: auto; }
.user-item { padding: 15px 20px; cursor: pointer; transition: background-color 0.2s ease; border-left: 3px solid transparent;}
.user-item:hover { background: rgba(0,0,0,0.1); }
.user-item.active { background: rgba(255,255,255,0.2); border-left: 3px solid #fff; font-weight: 600; }

body.dark-mode .sidebar-header { background: rgba(0,0,0,0.2); }
body.dark-mode .user-item.active { border-left-color: var(--primary-blue); }


/* --- Chat Window --- */
.chat-window { flex: 1; display: flex; flex-direction: column; }
.chat-header {
    padding: 18px 25px;
    background: var(--bg-content, var(--bg-content-light));
    border-bottom: 1px solid var(--border, var(--border-light));
    box-shadow: 0 1px 3px var(--shadow, var(--shadow-light));
    z-index: 10;
    transition: background-color 0.3s, border-bottom 0.3s;
}
.chat-header h2 { margin: 0; font-size: 1.1rem; font-weight: 600; }

/* --- Message Area --- */
.message-area { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; }
.message { max-width: 65%; padding: 12px 18px; border-radius: 18px; opacity: 0; transform: translateY(10px); animation: slideInUp 0.4s forwards; }
.message p { margin: 0; line-height: 1.4; }
.message.sent { background: var(--gradient-blue); color: white; align-self: flex-end; border-bottom-right-radius: 4px; }
.message.received { background: var(--bg-received-msg, var(--bg-received-msg-light)); color: var(--text-primary, var(--text-primary-light)); align-self: flex-start; border-bottom-left-radius: 4px; transition: background-color 0.3s, color 0.3s; }

/* --- Message Input Form --- */
.message-form {
    display: flex;
    align-items: center;
    padding: 15px 25px;
    background: var(--bg-content, var(--bg-content-light));
    border-top: 1px solid var(--border, var(--border-light));
    transition: background-color 0.3s, border-top 0.3s;
}
#message-input {
    flex: 1;
    padding: 12px 20px;
    border: none;
    background: var(--bg-main, var(--bg-main-light));
    color: var(--text-primary, var(--text-primary-light));
    border-radius: 25px;
    outline: none;
    font-size: 1rem;
    transition: all 0.3s;
}
#message-input:focus { box-shadow: 0 0 5px rgba(0, 119, 255, 0.4); }
.message-form button { margin-left: 10px; width: 48px; height: 48px; border: none; background: var(--gradient-blue); color: white; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: transform 0.2s, box-shadow 0.2s; }
.message-form button:hover { transform: scale(1.1); box-shadow: 0 4px 10px rgba(0, 119, 255, 0.3); }
.message-form button svg { width: 24px; height: 24px; }

/* --- Animation --- */
@keyframes slideInUp {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Custom Scrollbar */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-thumb { background: #ccc; border-radius: 10px; }
body.dark-mode ::-webkit-scrollbar-thumb { background: #555; }